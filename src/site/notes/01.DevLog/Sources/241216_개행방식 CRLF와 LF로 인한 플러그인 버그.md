---
{"dg-publish":true,"permalink":"/01.DevLog/Sources/241216_개행방식 CRLF와 LF로 인한 플러그인 버그/"}
---

# 개요
https://github.com/homuler/MediaPipeUnityPlugin

> 😀 **웹캠을 사용한 손 동작 인식**을 위해 **Unity MediaPipe 플러그인**을 설치하여 사용하고 있다, 그런데..

### 문제상황
* **Mac에서 실행시**
	* 왼손 오른손 정상 구분 가능
* **Windows에서 실행시**
	* 왼손 오른손 구분 못함
# 원인 발견

> 😲 왼손과 오른손 구분 함수를 타고 들어가다 보니 발견한 **txt 파일**
	
``` 
Left
Right

```

 > 이 파일의 내용으로 수행하는 일을 찾아보니..
* **Left,Right를 키 값**으로 사용, **왼손,오른손 구분** 처리 수행
* 이 부분이 의심되어 왼손,오른손 키값을 판단하는 **함수를 디버깅**해보기로 함

### 함수 디버깅 결과
* **Mac**에서
	* 변수에 정상적으로 **'Left'** 값이 담김
* **Windows**에서
	* 변수에 이상하게 **Left\r'** 값이 담김..?

> 🤨 뭐지? 이상하기는 하지만 일단 문제는 해결해야 하니까..

* 해당 키값 문자열에서 **\r을 제거**하는 **코드**를 추가해 **임시로 수정**
* 그러나 **근본적인 해결책**은 되지 않을 것 같았다.

> 🤔 **\r**이 뭐였더라? 찾아보니..

* **\r**은 **캐리지 리턴**이라는 **이스케이프 문자**
	* 커서를 맨 앞으로 보내주는 역할을 수행한다.
* **Windows**에서는 \n과 조합해 줄바꿈을 **\r\n(CRLF)** 으로 표현한다.
* **Mac,Linux**에서는 **\n(LF)** 만으로 표현한다

> 원인을 찾은 느낌이었다, 바로 OS별로 프로젝트를 클론해놓고 해당 txt파일의 개행 문자를 확인했다

### OS별 txt파일 개행 문자 포맷 확인 결과
* **Windows**에서 확인했을 때
	* **CRLF** 포맷
* **Mac**에서 확인했을 때
	* **LF** 포맷

> 🙄 문제 이유는 확실히 파악되었다. 그런데 CRLF는 Windows의 기본 개행 문자니 근본적인 해결 방법은 없는건가?
# 해결
### 깃 어트리뷰트 세팅
* **깃 어트리뷰트 설정값**으로 개행 이스케이프 문자 자동 설정 가능함을 발견
* 플러그인의 샘플 프로젝트에서 깃 어트리뷰트를 열어보니..
``` 
* text=auto eol=lf
*.{cmd,[cC][mM][dD]} text eol=crlf
*.{bat,[bB][aA][tT]} text eol=crlf
```

* **샘플 프로젝트에는 텍스트 파일의 줄바꿈 포맷을 lf로 설정하는 라인**이 있었다!
    * 때문에 샘플 프로젝트에는 위 문제가 발생하지 않았던 것이다.. 😭

> 우리 프로젝트에도 위 라인을 추가하고 새로 클론해보니 텍스트 파일들이 lf 포맷으로 클론되어 Windows에서도 정상적으로 작동하기 시작했다!

