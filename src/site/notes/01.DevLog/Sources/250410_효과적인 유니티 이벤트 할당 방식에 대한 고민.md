---
{"dg-publish":true,"permalink":"/01.DevLog/Sources/250410_효과적인 유니티 이벤트 할당 방식에 대한 고민/"}
---

## 단순하게 접근

### 1번 방식) 스크립트에서 객체에 직접 이벤트를 할당하는 방식

```csharp
[SerializeField]
private Button button

public void Start()
{
	button.onClick.AddListener(OnConfirm);
}

public void OnConfirm()
{
    // 내용 구현
}
```

- 예) Button.onClick.AddListener
- 장점
    - 코드를 통해 조작하므로 개발자 입장에서 개발하기 편하다
    - 런타임 이후 내용을 조작하므로 상황 변화에 대응하기 좋다
- 단점
    - 비개발자 입장에서 기능을 조작하기 어렵다

### 2번 방식) 인스펙터상의 이벤트 필드에 이벤트를 직접 할당하는 방식

```csharp
public void OnConfirm()
{
	// 이 함수를 인스펙터의 버튼 콜백에 등록하여 사용한다
}
```

- 예) 인스펙터상의 Button 컴포넌트의 OnClick 이벤트에 콜백함수를 등록한다
- 장점
    - 코드를 살펴보지 않아도 해당 버튼이 어떤 기능을 하는지 대강이나마 파악할 수 있고 코드 수정없이 할당된 기능 변경이 가능하다 (비개발자 입장에서 수정하기 좋음)
- 단점
    - 분산된 각각의 UI 요소들에 이벤트가 할당되어 있으므로 어떤 이벤트가 등록되어있는지 한눈에 알기 어렵고 누락되었을때 알아채기 쉽지 않다

## 좀 더 깊이 생각해보면

### 2번 인스펙터 할당 방식을 사용하면 스크립트에서 어떤 컴포넌트를 사용하는지 숨길 수 있다

- 코드 할당 방식
    - **코드 할당방식은 자유도가 떨어진다**
    - 만약 위와 같은 예시에서 여러 버튼에 이벤트를 등록하고 싶다거나 내가 만들어낸 커스텀 입력 컴포넌트에 OnConfirm을 할당하고 싶다면? **스크립트를 수정해야 한다**
- 인스펙터 할당 방식
    - **이벤트 연결 방식에 대한 구체적 구현을 스크립트상에서 감출 수 있다**
        - Button이든 내가 만들어낸 커스텀 입력 컴포넌트든 **인스펙터의 이벤트 필드만 사용할 수 있다면 자유롭게 연결하여 사용할 수 있다**
        - 여러 버튼에 같은 이벤트를 할당하고 싶을때도 각자의 버튼들에 **이벤트만 할당**하면 끝이다

### 그렇다고 해도 인스펙터 할당에 복잡한 로직이 들어가는건 부적합하다

- **아이템 결제 버튼에 복잡한 로직을 넣는다면?**
    - OnClick()
        - OnPurchaseConfirm
        - ShowPurchaseMessage
        - AddItem
        - SendPurchaseLog
        - …
    - 이러면..
        - 코드 변경에 대응하기 어렵다
        - 런타임 이후 로직을 변경해야 할때 복잡해진다
        - 만약 Missing이라도 난다면.. 😇
- **복잡한 로직은 코드에서 처리하고 인터페이스 역할을 하는 함수만 실행하는것이 적합**
    - OnClick()
        - OnPurchaseConfirm

# 그래서 우리 프로젝트에는 어떻게 적용시켜야 할 것인가?

* 따라서 두가지 방법 다 일장일단이 있다!
    - **코드 할당은 직관적**이다, 딱 보면 동작 방식을 알아보기 쉽다, 하지만 **다양한 UI에 대응하기 어렵다**.. 🥲
    - **이벤트 기반은 자유롭고 유연**하다, 그러나 Missing등 **누락되었을때 알아채기 어렵고 구조를 파악하기 어렵다**.. 🥹

* **이상적으로 관리할 수 있다는 전제라면 인스펙터 할당**이 확장성 높게 활용할 수 있다
	* 코드 할당 대비 **확장성 높게 UI를 사용할 수 있는 장점**은 살리되 **변경과 누락에 좀 더 쉽게 대응**할 수 있도록 **버튼에 할당되는 이벤트임을 잘 알 수 있도록 네이밍하고** **최소한의 이벤트만 등록**하는 방식으로 사용하면 좋겠다

* 근데 현실적으로 쉽지 않은것도 사실이긴 하다
	* 여러 사람들이 수정하다보면 **미싱이 안나기는 현실적으로 어렵고 인스펙터 할당은 히스토리 추적도 어렵다**..

### 최종 결론

> **이벤트 기반**으로 가기로 했다, 그러나 **굳이 확장성을 확보할 필요가 없는 경우**엔 사용할 필요 없을 것 같다는게 결론이었다!

* 다양한 형태로 사용될 여지가 있는 컴포넌트라면 이벤트 방식을 사용하자!
    * **완전히 구체적인 컴포넌트**면 **스크립트 할당** 방식이 오히려 관리가 용이할 것 같다.
        * 예) **회원가입 UI**, 회원가입 화면을 여러 방식으로 구현할 일이 없을 확률이 높겠지.
    * **좀 더 다양한 형태로 바리에이션 될 확률이 높은 컴포넌트**라면 **인스펙터 할당**을 사용하자.
        * 예) **메시지 팝업 UI**, 하나의 버튼 컴포넌트만 사용해 닫기 버튼을 만들수도 있겠지만 경우에 따라 우측 상단에 X 버튼을 추가한다던지 하는 바리에이션이 생길수도 있을듯.
        * 아래 이미지처럼 😁
![WindowXPErrorMessage.png](/img/user/01.DevLog/Sources/Files/WindowXPErrorMessage.png)

