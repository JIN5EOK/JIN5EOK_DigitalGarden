---
{"dg-publish":true,"permalink":"/02.DevWiki/Sources/메모리 정렬 (Memory Alignment)/"}
---

### 개념
* CPU의 효율적인 메모리 접근을 위해 일정한 길이 단위로 데이터를 정렬하는 것
* 단위의 크기는 타입의 크기에 따라 결정됨
	* 예) int의 경우 4 바이트
### 구조체와 메모리 정렬
* 구조체의 메모리 정렬 단위는 구조체에서 가장 큰 멤버변수의 크기로 결정된다
	* 예를들면 구조체에서 가장 큰 멤버변수가 double일 경우 정렬 단위는 8바이트
* 만약 int, byte, int, byte 순서대로 변수가 선언되어 있을 경우
	* OOOO OXXX, OOOO, OXXX
	* 형태로 byte자료형의 경우 정렬 단위에서 3 바이트가 모자라므로 빈 공간이 생기는 **패딩(padding)** 이 일어난다
* 따라서 서로 **크기가 다른 자료형**이 모여있는 구조체에서 메모리 정렬로 인한 **공간 낭비**가 발생할 수 있다.

### 그럼 어떻게 해야 메모리 정렬로 인한 공간 낭비를 최소화할 수 있을까?
* 변수를 선언할 때 크기가 큰 자료형을 우선적으로 선언
* 패딩을 제거하기
	* 언어마다 방식은 다르지만 패딩을 제거하는 방법들이 존재함
	* 여러가지 문제가 발생할 수 있으므로 신중하게 사용할 필요 있음
		* 크래시 혹은 속도 저하 (애초에 메모리 정렬 자체가 CPU의 효율적인 접근을 위한 것이니 당연함)
		* 직렬화, 통신등에서 호환성 문제 발생


